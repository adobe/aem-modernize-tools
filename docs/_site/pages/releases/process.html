<!DOCTYPE HTML>
<html>

    <head>

    
        <title>Release Process | AEM Modernization Tools</title>
    
    
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="google-site-verification" content="lunlv61z07z3yf-aXoSSoHC3VUWRrJ-MkUXtggDUcOE" />

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-138736911-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-138736911-1');
    </script>

    <link rel="stylesheet" href="/aem-modernize-tools/assets/css/styles.css" />

</head>


    <body>
        <!-- Wrapper -->
        <div id="wrapper">

        <!-- Main -->
            <div id="main">
                <div class="inner">

                    <div class="content-page">
    <h1>Release Process</h1>

    <article class="page-content">
    <h2 id="executing-the-process">Executing the Process</h2>

<blockquote>
  <p>The release process can only be executed by Adobe Employees with access to ACS Jenkins Instance.</p>
</blockquote>

<p>The release process is performed entirely by the Jenkins pipeline. To perform a release:</p>

<ol>
  <li>Access the <a href="https://acs.ci.corp.adobe.com/blue/organizations/jenkins/AEM%20Modernize%20Tools/branches/">AEM Modernize Tools pipeline</a> on the ACS Jenkins instance.</li>
  <li>Trigger the pipeline (do <em>not</em> replay the last run.)</li>
  <li>Answer the question on the type of release being performed.</li>
  <li>Verify the release version.</li>
  <li>Sit back and watch.</li>
</ol>

<h2 id="setting-it-up">Setting it up</h2>

<p>The pipeline setup has already been performed. But as a mechanism for documentation in the event it needs to be recreated:</p>

<h3 id="github-access">Github Access</h3>

<p>First thing’s first, Jenkins will be accessing the Github repo. This pipeline uses a system account <code class="language-plaintext highlighter-rouge">adobe-acsbuild</code>.</p>

<h4 id="api-token">API Token</h4>
<ol>
  <li>On Github create a new <a href="https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line">Access Token</a>, the only access scope required is <em>repo</em>.</li>
  <li>Create a new <em>Credential</em> entry with the access token for the password. The <strong>ID</strong> value must match the pipeline reference.</li>
</ol>

<p class="image">
    <img src="/aem-modernize-tools/pages/releases/images/github-token-credential.png" alt="ACSBuild Github Token Credential" />
</p>

<h3 id="bintray-access">BinTray Access</h3>

<p>We deploy the artifacts to Bintray so we need to setup those credentials.</p>

<ol>
  <li>
    <p>Get the API Key from the Abode ACSBuild Bintray account.</p>
  </li>
  <li>
    <p>Create a new <em>Credential</em> entry with the access token for the password.</p>
  </li>
</ol>

<p class="image">
    <img src="/aem-modernize-tools/pages/releases/images/bintray-token-credential.png" alt="ACSBuild Bintray Token Credential" />
</p>

<h3 id="maven-settings">Maven Settings</h3>

<p>The project’s POM is already configured for the Bintray Adobe repository &amp; package, we just need to supply the credentials. This is done through a custom build <em>settings.xml</em>. The pipeline is also pre-configured to reference this file - we need to a) make sure it exists, and b) has the expected credentials.</p>

<ol>
  <li>Check to see if an existing <em>Maven Settings</em> exists with an <strong>ID</strong> of <code class="language-plaintext highlighter-rouge">acsbuild-settings</code>. If so edit the existing one, otherwise create a new one with this <strong>ID</strong>.</li>
  <li>Give it an appropriate name and description if it did not previously exist.</li>
  <li>Add two credentials to the <em>Server Credentials</em> section:
    <ul>
      <li>ACSBuild Github Token credentials, the <em>ServerId</em> is <code class="language-plaintext highlighter-rouge">adobe-acsbuild-github-token</code> (this is the value from the pom’s <code class="language-plaintext highlighter-rouge">project.scm.id</code>).</li>
    </ul>
    <ul>
      <li>ACSBuild Bintray credentials, the <em>ServerId</em> is <code class="language-plaintext highlighter-rouge">bintray-adobe-maven</code> (this is the value from the pom’s <code class="language-plaintext highlighter-rouge">distributionManagement</code>).</li>
    </ul>
  </li>
</ol>

<p class="image">
    <img src="/aem-modernize-tools/pages/releases/images/acsbuild-settings.png" alt="ACSBuild Maven Settings" />
</p>

<h3 id="tools">Tools</h3>

<p>Install the JKD 8 and Maven 3.5 tools on the Jenkins server. Name them <code class="language-plaintext highlighter-rouge">JKD8</code> and <code class="language-plaintext highlighter-rouge">Maven 3.5</code> respectively. (You can install newer versions, or name them differently, just make sure to update the Jenkinsfile references.)</p>

<h3 id="plugins">Plugins</h3>

<p>The pipeline makes use of a few plugins, not all of which are likely to be installed by default. Install the following Jenkins Plugins:</p>

<ul>
  <li>HTTP Request</li>
</ul>

<h3 id="pipeline-job">Pipeline Job</h3>

<p>The pipeline is self-contained - so we just need to configure the actual Jenkins job definition.</p>

<ol>
  <li>Create a new <em>Multibranch Pipeline</em> job, title <code class="language-plaintext highlighter-rouge">AEM Modrnize Tools</code></li>
  <li>Fill out the configuration, anything not shown in this image can be left with the default value.</li>
</ol>

<p class="image">
    <img src="/aem-modernize-tools/pages/releases/images/jenkins-job-configuration.png" alt="AEM Modernize Tools Jenkins configuration" />
</p>

<h4 id="script-approvals">Script Approvals</h4>

<p>The first run of a release may error at the Metadata or Github Release stage, due to a security check. Scripted pipelines are not permitted to call the SCM User Config or to instantiate JsonSlurperClassic used to parse Github API responses. Approving the following signatures will resolve this and allow the pipeline to complete successfully.</p>

<p>Also, to parse a response from the Github API we need to approve the JsonSlurper API as well.</p>

<p>This may be resolved at a future date if we decide to move these steps to a Shared Library, instead of in the pipeline itself. For now we are trying to keep everything self-contained.</p>

<p class="image">
    <img src="/aem-modernize-tools/pages/releases/images/script-approvals.png" alt="Jenkins Script Approvals" />
</p>

    </article>
</div>


                </div>
                <div class="footer">
                    <a href="/aem-modernize-tools/pages/license.html">License</a>
                    <span class="right">&copy; Adobe, Inc. All Rights Reserved<br/>
            <a href="/aem-modernize-tools/pages/notice.html">Trademark Notice</a>
        </span>
                </div>
            </div>
            <!-- Sidebar -->
<div id="sidebar">
    <div class="inner">

        <!-- Menu -->
        <nav id="menu">
            <header class="major">
                <h3><a href="/aem-modernize-tools/">AEM Modernization Tools</a></h3>
            </header>
            <ul>
                <li><a href="/aem-modernize-tools/pages/v2-changes.html">Version 2.0 Changes</a></li>
            </ul>
            <ul>
                <li>
                    <span class="opener">Planning &amp; Operation</span>
                    <ul>
                        <li><a href="/aem-modernize-tools/pages/plan-operate/plan.html">Project Planning</a></li>
                        <li><a href="/aem-modernize-tools/pages/plan-operate/evaluation.html">Evaluating a Site</a></li>
                        <li><a href="/aem-modernize-tools/pages/plan-operate/set-up.html">Set Up</a></li>
                        <li><a href="/aem-modernize-tools/pages/plan-operate/usage.html">Using the Tools</a></li>
                    </ul>
                </li>
                <li>
                    <span class="opener">All-in-One Conversion</span>
                    <ul>
                        <li><a href="/aem-modernize-tools/pages/all-in-one/about.html">About the Feature</a></li>
                        <li><a href="/aem-modernize-tools/pages/all-in-one/usage.html">How to Use</a></li>
                        <li><a href="/aem-modernize-tools/pages/all-in-one/config.html">Configuring the Rules</a></li>
                    </ul>
                </li>
                <li>
                    <span class="opener">Page Structure Conversion</span>
                    <ul>
                        <li><a href="/aem-modernize-tools/pages/structure/about.html">About the Feature</a></li>
                        <li><a href="/aem-modernize-tools/pages/structure/usage.html">How to Use</a></li>
                        <li><a href="/aem-modernize-tools/pages/structure/config.html">Configuring the Rules</a></li>
                    </ul>
                </li>
                <li>
                    <span class="opener">Component Conversion</span>
                    <ul>
                        <li><a href="/aem-modernize-tools/pages/component/about.html">About the Feature</a></li>
                        <li><a href="/aem-modernize-tools/pages/component/usage.html">How to Use</a></li>
                        <li><a href="/aem-modernize-tools/pages/component/config.html">Configuring the Rules</a></li>
                    </ul>
                </li>
                <li>
                    <span class="opener">Policy Importing</span>
                    <ul>
                        <li><a href="/aem-modernize-tools/pages/policy/about.html">About the Feature</a></li>
                        <li><a href="/aem-modernize-tools/pages/policy/usage.html">How to Use</a></li>
                        <li><a href="/aem-modernize-tools/pages/policy/config.html">Configuring the Rules</a></li>
                    </ul>
                </li>
                <li>
                    <span class="opener">Development</span>
                    <ul>
                        <li><a href="/aem-modernize-tools/apidocs/index.html">API Java Docs</a></li>
                        <li><a href="/aem-modernize-tools/pages/development/extending.html">Extending</a></li>
                        <li><a href="/aem-modernize-tools/pages/development/troubleshooting.html">Troubleshooting</a></li>
                    </ul>
                </li>
                <li><a href="/aem-modernize-tools/pages/support-license.html">Support &amp; Licensing</a></li>
            </ul>
        </nav>

        <!-- Section -->
        <section>
            <header class="major">
                <h2>Download</h2>
            </header>
            <article>
                <p>Download the latest release from GitHub.</p>
            </article>

            <ul class="actions">
                <li style="margin-bottom: 1rem;">
                    <a href="https://github.com/adobe/aem-modernize-tools/releases/" target="_blank" class="button primary icon solid fa-download">Download</a>
                </li>
                <li>
                    <a href="/aem-modernize-tools/pages/releases.html" class="button">Release notes</a>
                </li>
            </ul>
        </section>

        <!-- Section -->
        <section>
            <header class="major">
                <h2>GitHub Project</h2>
            </header>
            <p>
                AEM Modernization Tools' source code is open and freely available on GitHub.
            </p>

            <ul class="contact">
                <li class="fa-github"><a href="https://github.com/adobe/aem-modernize-tools" target="_blank">github.com/adobe/aem-modernize-tools</a></li>
                <li class="fa-bug"><a href="https://github.com/adobe/aem-modernize-tools/issues" target="_blank">Report issues</a></li>
                <li class="fa-pencil"><a href="https://github.com/adobe/aem-modernize-tools/blob/main/.github/CONTRIBUTING.md">Learn how to contribute</a></li>
                <li class="fa-rocket"><a href="/aem-modernize-tools/pages/releases/process.html">Learn about the release process</a></li>
            </ul>
        </section>
    </div>
</div>


        </div>
    </body>
    <footer>
        
<!-- Scripts -->

<script src="/aem-modernize-tools/assets/js/jquery.min.js"></script>
<script src="/aem-modernize-tools/assets/js/jquery.pjax.js"></script>
<script src="/aem-modernize-tools/assets/js/browser.min.js"></script>
<script src="/aem-modernize-tools/assets/js/breakpoints.min.js"></script>
<script src="/aem-modernize-tools/assets/js/util.js"></script>
<script src="/aem-modernize-tools/assets/js/main.js"></script>

<script src="/aem-modernize-tools/assets/js/custom.js"></script>


    </footer>
</html>
